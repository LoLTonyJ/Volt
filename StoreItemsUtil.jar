package me.tony.main.voltnetwork.GravestoneUtil;

import eu.decentsoftware.holograms.api.DHAPI;
import eu.decentsoftware.holograms.api.holograms.Hologram;
import me.clip.placeholderapi.PlaceholderAPI;
import me.tony.main.voltnetwork.VoltNetwork;
import org.bukkit.*;
import org.bukkit.block.Block;
import org.bukkit.entity.ArmorStand;
import org.bukkit.entity.EntityType;
import org.bukkit.entity.Player;
import org.bukkit.inventory.Inventory;
import org.bukkit.inventory.ItemStack;

import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;

public class StoreItems {

    public static HashMap<Player, ItemStack[]> SaveInv = new HashMap<Player, ItemStack[]>();

    public static Inventory DeathInv(Player p) {

        Inventory pInv = Bukkit.createInventory(p, 54, ChatColor.translateAlternateColorCodes('&', "&c&l" + p.getDisplayName() + "'s Gravestone"));
        for (ItemStack item : SaveInv.get(p)) {
            if (item != null) {
                pInv.addItem(item);
            }
        }

        p.openInventory(pInv);

        return pInv;

    }

    public static void Hologram(Player p, Location loc) {

        List<String> GraveStoneList = VoltNetwork.getInstance().getConfig().getStringList("gravestone_message");
        String GraveStoneTitle = VoltNetwork.getInstance().getConfig().getString("gravestone_title");

        assert GraveStoneTitle != null;
        GraveStoneTitle = PlaceholderAPI.setPlaceholders(p, GraveStoneTitle);

        DHAPI.createHologram(p.getName(), loc, Collections.singletonList(GraveStoneTitle));
        if (DHAPI.getHologram(p.getName()) != null) {
            for (String i : GraveStoneList) {
                DHAPI.addHologramLine(Hologram.getCachedHologram(p.getName()), i);
            }
        }
    }

    public static void StoreOnDeath(Player p) {
        SaveInv.put(p, p.getInventory().getContents());
    }


}
